-- this is the local script that goes inside of ui button 

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- RemoteEvent to ask server to change character
local chooseAvatarEvent = ReplicatedStorage:WaitForChild("ChooseAvatar")

-- When the player clicks the button for "Knight"
script.Parent.MouseButton1Click:Connect(function()
    chooseAvatarEvent:FireServer("Knight")  -- "Knight" is the model name
end)


-- put this in ServerScriptService

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local ServerStorage = game:GetService("ServerStorage")
local Players = game:GetService("Players")

local chooseAvatarEvent = Instance.new("RemoteEvent")
chooseAvatarEvent.Name = "ChooseAvatar"
chooseAvatarEvent.Parent = ReplicatedStorage

chooseAvatarEvent.OnServerEvent:Connect(function(player, avatarName)
    local avatarTemplate = ServerStorage:FindFirstChild(avatarName)
    if avatarTemplate and avatarTemplate:IsA("Model") then
        local character = avatarTemplate:Clone()
        character.Name = player.Name
        player:LoadCharacter()
        wait(0.1)
        player.Character = character
        character.Parent = workspace
        character:SetPrimaryPartCFrame(CFrame.new(0, 5, 0)) -- adjust spawn location
    end
end)


